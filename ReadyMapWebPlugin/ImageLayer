#ifndef READYMAPWEBPLUGIN_IMAGELAYER_H
#define READYMAPWEBPLUGIN_IMAGELAYER_H


#include <ReadyMapWebPlugin/Export>
#include <ReadyMapWebPlugin/Command>

#include <osg/observer_ptr>

#include <osgEarth/ImageLayer>

#include <string>


namespace ReadyMapWebPlugin
{
    class READYMAPWEBPLUGIN_EXPORT MapControl;

    class UpdateImageLayerCommand : public Command
    {
    public:
        class Factory : public CommandFactory
        {
            virtual Command* create(const std::string& command, const CommandArguments& args);
        };
        UpdateImageLayerCommand(const std::string &id, const CommandArguments& args, double opacity=1.0, bool visible=true);
        virtual bool operator()(MapControl* map);
    protected:
        osgEarth::ImageLayer* createImageLayer();

        const CommandArguments _args;
        std::string _id;
        double _opacity;
        bool _visible;
    };

    class RemoveImageLayerCommand : public Command
    {
    public:
        class Factory : public CommandFactory
        {
            virtual Command* create(const std::string& command, const CommandArguments& args);
        };
        RemoveImageLayerCommand(const std::string &id);
        virtual bool operator()(MapControl* map);
    protected:
        std::string _id;
    };
}
#endif READYMAPWEBPLUGIN_IMAGELAYER_H
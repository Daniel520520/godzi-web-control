<html>
<head>

<meta http-equiv="x-ua-compatible" content="IE=10">

<title>Terrain Profile</title>

<style type="text/css">

html, body {
  margin: 0;
  padding: 0;
}

#map_div { 
  width: 80%;
  height: 100%;
  float: left;
}

#control_div {
  width: 20%;
  height: 100%;
  padding: 10px;
  float: left;
  overflow: auto;
  background-color: #ddd;
  box-sizing: border-box;
}

#output_div {
  margin: 20px 10px;
  height: 200px;
  overflow: auto;
  background-color: #ccc;
  color: #000;
  padding: 2px;
  font-size: small;
}

</style>

<script src="../api/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="../api/jquery.json-2.2.min.js" type="text/javascript"></script>
<script src="../api/PluginManagement.js" type="text/javascript"></script>
<script src="../api/BrowserDetect.js" type = "text/javascript"></script>
<script src="../api/Common.js" type="text/javascript"> </script>
<script src="../api/Color.js" type="text/javascript"> </script>
<script src="../api/Location.js" type="text/javascript"></script>
<script src="../api/Orientation.js" type="text/javascript"></script>
<script src="../api/Scale.js" type="text/javascript"></script>
<script src="../api/Map.js" type="text/javascript"> </script>
<script src="../api/Utils.js" type="text/javascript"></script>
<script src="../api/Controls/TerrainProfileButtonControl.js" type="text/javascript"> </script>
<script src="../api/Annotations/Annotation.js" type="text/javascript"></script>
<script src="../api/Annotations/FeatureAnnotation.js" type="text/javascript"></script>
<script src="../api/Annotations/PlaceAnnotation.js" type="text/javascript"></script>


<script type="text/javascript">

var map = null;
var profileControl;

function initialize() {
  map = new Map('mapcontrol');
  map.setMapFile("http://gwaldron.github.io/godzi-web-control/examples/data/readymap.earth");
  map.showSky();

  profileControl = new TerrainProfileButtonControl("profileButtonDiv", map, onProfileComplete);
}

function onProfileComplete(output) {
  if (output) {
    document.getElementById('output_div').innerHTML = output;
  }
  else {
    document.getElementById('output_div').innerHTML = "Invalid value";
  }
}

</script>

</head>

<body onload="initialize()">

<div id="map_div">
  <script type="text/javascript">
    Map.embed("map_div", "mapcontrol", "application/osgearth", "CLSID:5F41CFDD-D29D-4CA8-B37D-6F64F28E12EA");
  </script>
</div>

<div id="control_div">
  <p>To get a terrain profile click the "Terrain Profile" button below then click two points on the map."</p>
  <div id="profileButtonDiv"></div>
  <div id="output_div"></div>
</div>

</body>
</html>
